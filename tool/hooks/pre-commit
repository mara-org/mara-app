#!/bin/bash

# Pre-commit hook for Mara Flutter app
# This hook runs dart format and flutter analyze before allowing a commit
#
# To install this hook, run: sh tool/install_hooks.sh

set -e

echo "ğŸ” Running pre-commit checks..."

# Run dart format
echo "ğŸ“ Formatting code..."
dart format . || {
    echo ""
    echo "âŒ Code formatting failed."
    echo "Please run 'dart format .' manually and commit again."
    exit 1
}

# Run flutter analyze
echo "ğŸ” Analyzing code..."
flutter analyze || {
    echo ""
    echo "âŒ Code analysis failed. Please fix the issues above."
    exit 1
}

echo "âœ… Pre-commit checks passed!"
exit 0

